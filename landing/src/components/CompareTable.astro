---
const platforms = [
  { name: 'VF Pro', sub: '$20/mo', vf: true },
  { name: 'VF Premium', sub: '$80/mo', vf: true },
  { name: 'Cursor', sub: '$20/mo', vf: false },
  { name: 'Codespaces', sub: '$0+usage', vf: false },
  { name: 'Replit', sub: '$25/mo', vf: false },
];

const features = [
  {
    name: 'Cloud terminal',
    tip: 'Full Linux shell with apt, npm, git',
    values: [true, true, 'local', true, 'limited'],
  },
  {
    name: 'AI-native IDE',
    tip: 'Built-in AI with streaming chat and tool use',
    values: [true, true, true, 'addon', 'limited'],
  },
  {
    name: 'Zero install',
    tip: 'Open browser, start coding. No downloads.',
    values: [true, true, false, true, true],
  },
  {
    name: 'Mobile-first UX',
    tip: 'Touch-optimized, iPad layout, PWA',
    values: [true, true, false, false, 'limited'],
  },
  {
    name: 'Edge infrastructure',
    tip: 'Cloudflare Workers + Containers globally',
    values: [true, true, false, false, false],
  },
  {
    name: 'Secrets vault',
    tip: 'Encrypted secrets injected at runtime',
    values: [true, 'unlimited', 'manual', 'limited', 'limited'],
  },
  {
    name: 'File persistence',
    tip: 'Files survive between sessions',
    values: ['7 days', '30 days', 'local', true, true],
  },
  {
    name: 'Bring your own key',
    tip: 'Use your existing Claude subscription',
    values: [true, true, true, false, false],
  },
  {
    name: 'MCP relay',
    tip: 'Connect local MCP servers to cloud',
    values: [true, true, false, false, false],
  },
  {
    name: 'Concurrent sessions',
    tip: '',
    values: ['3', '10', 'n/a', '2', '1'],
  },
];

function cellType(val: boolean | string) {
  if (val === true) return 'yes';
  if (val === false) return 'no';
  return 'text';
}
---

<section id="compare" class="relative px-4 py-24 sm:px-6 sm:py-32">
  <div class="absolute left-1/2 top-0 -translate-x-1/2 h-[400px] w-[600px] rounded-full bg-vapor-purple/4 blur-[160px] pointer-events-none" />

  <div class="relative z-10 mx-auto max-w-6xl">
    <div class="text-center mb-16">
      <span class="font-display text-xs tracking-[0.3em] uppercase text-vapor-purple">How we stack up</span>
      <h2 class="mt-4 font-display text-3xl font-bold tracking-wide sm:text-4xl cyber-glow">
        Not another code playground
      </h2>
      <p class="mx-auto mt-5 max-w-2xl text-vapor-muted leading-relaxed">
        VaporForge is a full cloud development environment with a real Linux terminal,
        not a sandboxed REPL. See how we compare to the most popular platforms.
      </p>
    </div>

    <!-- Desktop table -->
    <div class="hidden md:block overflow-x-auto rounded-2xl border border-vapor-purple/20">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-vapor-purple/20 bg-vapor-card/60">
            <th class="py-4 pl-6 pr-4 text-left text-xs font-display tracking-wider uppercase text-vapor-muted w-[220px]">Feature</th>
            {platforms.map((p) => (
              <th class="py-4 px-2 text-center">
                {p.vf ? (
                  <span class="font-display text-sm tracking-wide cyber-gradient-text font-bold block">{p.name}</span>
                ) : (
                  <span class="font-display text-xs font-medium text-vapor-muted block">{p.name}</span>
                )}
                <span class="text-[10px] text-vapor-muted/60 block mt-0.5">{p.sub}</span>
              </th>
            ))}
          </tr>
        </thead>
        <tbody>
          {features.map(({ name, tip, values }, i) => (
            <tr class={`border-b border-vapor-purple-bg/20 ${i % 2 === 0 ? 'bg-vapor-bg' : 'bg-vapor-card/30'} hover:bg-vapor-purple-bg/10 transition-colors`}>
              <td class="py-3.5 pl-6 pr-4">
                <span class="text-white font-medium">{name}</span>
                {tip && <span class="block text-xs text-vapor-muted/70 mt-0.5">{tip}</span>}
              </td>
              {values.map((val, ci) => {
                const t = cellType(val);
                const isVf = ci < 2;
                const isPremium = ci === 1;
                return (
                  <td class="py-3.5 px-2 text-center">
                    {t === 'yes' && isVf && (
                      <span class="inline-flex h-6 w-6 items-center justify-center rounded-full bg-vapor-purple/15 mx-auto">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="text-vapor-purple"><polyline points="20 6 9 17 4 12"/></svg>
                      </span>
                    )}
                    {t === 'yes' && !isVf && (
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="inline text-vapor-muted/50"><polyline points="20 6 9 17 4 12"/></svg>
                    )}
                    {t === 'no' && (
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline text-vapor-muted/30"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                    )}
                    {t === 'text' && isVf && (
                      <span class:list={[
                        'font-display text-xs font-bold',
                        isPremium ? 'text-vapor-accent' : 'text-vapor-purple',
                      ]}>{String(val)}</span>
                    )}
                    {t === 'text' && !isVf && (
                      <span class="text-xs text-vapor-muted/60">{String(val)}</span>
                    )}
                  </td>
                );
              })}
            </tr>
          ))}
        </tbody>
      </table>
    </div>

    <!-- Mobile cards -->
    <div class="md:hidden space-y-3">
      {features.map(({ name, tip, values }) => {
        const proVal = values[0];
        const t = cellType(proVal);
        return (
          <div class="rounded-xl border border-vapor-purple/20 bg-vapor-card/40 p-4">
            <div class="flex items-start justify-between gap-3">
              <div>
                <span class="text-sm font-medium text-white">{name}</span>
                {tip && <span class="block text-xs text-vapor-muted/60 mt-0.5">{tip}</span>}
              </div>
              {t === 'yes' && (
                <span class="shrink-0 inline-flex h-6 w-6 items-center justify-center rounded-full bg-vapor-purple/15">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="text-vapor-purple"><polyline points="20 6 9 17 4 12"/></svg>
                </span>
              )}
              {t === 'text' && (
                <span class="shrink-0 font-display text-xs font-bold text-vapor-purple">{String(proVal)}</span>
              )}
            </div>
          </div>
        );
      })}
    </div>
  </div>
</section>
